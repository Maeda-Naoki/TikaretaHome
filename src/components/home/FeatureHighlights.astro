---
import { freeFeatures } from '@data/features';
import { useTranslations } from '@utils/i18n';

const t = useTranslations(Astro.currentLocale);
const locale = Astro.currentLocale ?? 'ja';
const featuresUrl = locale === 'ja' ? '/features' : '/en/features';

// Display first 6 features
const displayFeatures = freeFeatures.slice(0, 6);
---

<section class="py-16 md:py-24 px-4">
  <div class="max-w-6xl mx-auto">
    <h2 class="text-3xl md:text-4xl font-display font-bold text-warm-gray-900 text-center mb-12 fade-in-up">
      {t.featureHighlights.title}
    </h2>
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-10">
      {displayFeatures.map((feature, index) => {
        const featureKey = feature.titleKey.split('.')[1] as keyof typeof t.features;
        return (
          <div
            class="p-6 bg-white rounded-card shadow-soft hover:shadow-card transition-all fade-in-up"
            style={`animation-delay: ${index * 80}ms`}
          >
            <div class="text-3xl mb-3">{feature.icon}</div>
            <h3 class="text-lg font-bold text-warm-gray-900 mb-2">
              {t.features[featureKey].title}
            </h3>
            <p class="text-sm text-warm-gray-600">
              {t.features[featureKey].description}
            </p>
          </div>
        );
      })}
    </div>
    <div class="text-center fade-in-up">
      <a
        href={featuresUrl}
        class="inline-block text-primary-600 hover:text-primary-700 font-bold border-b-2 border-primary-600 hover:border-primary-700 transition-colors"
      >
        {t.featureHighlights.cta} â†’
      </a>
    </div>
  </div>
</section>
